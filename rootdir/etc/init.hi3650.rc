import /vendor/etc/init/hw/init.hi3650.connectivity.rc
import /vendor/etc/init/hw/init.hi3650.hisi.rc
import /vendor/etc/init/hw/init.hi3650.power.rc
import /vendor/etc/init/hw/init.hi3650.usb.configfs.rc
import /vendor/etc/init/hw/init.hi3650.usb.rc
import /vendor/etc/init/hw/init.safailnet.rc

on early-init
    mount debugfs debugfs /sys/kernel/debug
    chmod 0755 /sys/kernel/debug
    chmod 0222 /sys/kernel/debug/tracing/trace_marker
    
    setprop persist.service.hdb.enable true
    
    # Setup zram options
    write /sys/block/zram0/comp_algorithm lz4

    write /proc/sys/vm/page-cluster 0
    write /proc/sys/vm/swappiness 100
    
on init   
    wait /dev/block/platform/hi_mci.0
    symlink /dev/block/platform/hi_mci.0 /dev/block/bootdevice
    
    write /sys/module/hisi_nve/parameters/nve /dev/block/bootdevice/by-name/nvme
    
    wait /dev/nve0
    
    chmod 0400 /dev/hisi_teelog
    
    mkdir /dev/bus 0755 root root
    mkdir /dev/bus/usb 0755 root root
    mkdir /dev/bus/usb/001 0755 root root
    mkdir /dev/bus/usb/002 0755 root root
    
    chown system system /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
    chmod 664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
    chown system system /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
    chmod 664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
    chown system system /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
    chmod 664 /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
    chown system system /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq
    chmod 664 /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq

    chown system system /sys/devices/virtual/thermal/thermal_zone0/boost
    chmod 664 /sys/devices/virtual/thermal/thermal_zone0/boost
    chown system system /sys/devices/virtual/thermal/thermal_zone0/boost_timeout
    chmod 664 /sys/devices/virtual/thermal/thermal_zone0/boost_timeout

    chown system system /sys/class/devfreq/gpufreq/max_freq
    chmod 664 /sys/class/devfreq/gpufreq/max_freq
    chown system system /sys/class/devfreq/gpufreq/min_freq
    chmod 664 /sys/class/devfreq/gpufreq/min_freq
    chown system system /sys/class/devfreq/gpufreq/cur_freq
    chmod 664 /sys/class/devfreq/gpufreq/cur_freq
    chown system system /sys/class/devfreq/gpufreq/available_frequencies
    chmod 664 /sys/class/devfreq/gpufreq/available_frequencies
    chown system system /sys/class/devfreq/gpufreq/mali_ondemand/animation_boost
    chmod 664 /sys/class/devfreq/gpufreq/mali_ondemand/animation_boost
    chown system system /sys/class/devfreq/gpufreq/mali_ondemand/animation_boost_freq
    chmod 664 /sys/class/devfreq/gpufreq/mali_ondemand/animation_boost_freq
    chown system system /sys/class/devfreq/gpufreq/polling_interval
    chmod 664 /sys/class/devfreq/gpufreq/polling_interval

    chown system system /sys/class/devfreq/ddrfreq/max_freq
    chmod 664 /sys/class/devfreq/ddrfreq/max_freq
    chown system system /sys/class/devfreq/ddrfreq/min_freq
    chmod 664 /sys/class/devfreq/ddrfreq/min_freq
    chown system system /sys/class/devfreq/ddrfreq/ddr_bandwidth
    chmod 664 /sys/class/devfreq/ddrfreq/ddr_bandwidth
    chown system system /sys/class/devfreq/ddrfreq/cur_freq
    chmod 664 /sys/class/devfreq/ddrfreq/cur_freq
    chown system system /sys/class/devfreq/ddrfreq/available_frequencies
    chmod 664 /sys/class/devfreq/ddrfreq/available_frequencies
    chown system system /sys/class/devfreq/ddrfreq/polling_interval
    chmod 664 /sys/class/devfreq/ddrfreq/polling_interval
    chown system system /sys/kernel/set_hmp_thresholds/policy
    chmod 0664 /sys/kernel/set_hmp_thresholds/policy
    
    chown system system /sys/class/devfreq/ddrfreq_latency/available_frequencies
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/available_frequencies
    chown system system /sys/class/devfreq/ddrfreq_latency/available_governors
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/available_governors
    chown system system /sys/class/devfreq/ddrfreq_latency/cur_freq
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/cur_freq
    chown system system /sys/class/devfreq/ddrfreq_latency/ddr_bandwidth
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/ddr_bandwidth
    chown system system /sys/class/devfreq/ddrfreq_latency/ddr_chintlv
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/ddr_chintlv
    chown system system /sys/class/devfreq/ddrfreq_latency/governor
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/governor
    chown system system /sys/class/devfreq/ddrfreq_latency/max_freq
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/max_freq
    chown system system /sys/class/devfreq/ddrfreq_latency/min_freq
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/min_freq
    chown system system /sys/class/devfreq/ddrfreq_latency/polling_interval
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/polling_interval
    chown system system /sys/class/devfreq/ddrfreq_latency/target_freq
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/target_freq
    chown system system /sys/class/devfreq/ddrfreq_latency/trans_stat
    chmod 0664 /sys/class/devfreq/ddrfreq_latency/trans_stat

    chown system system /sys/class/devfreq/ddrfreq_up_threshold/max_freq
    chmod 664 /sys/class/devfreq/ddrfreq_up_threshold/max_freq
    chown system system /sys/class/devfreq/ddrfreq_up_threshold/min_freq
    chmod 664 /sys/class/devfreq/ddrfreq_up_threshold/min_freq
    chown system system /sys/class/devfreq/ddrfreq_up_threshold/ddr_bandwidth
    chmod 664 /sys/class/devfreq/ddrfreq_up_threshold/ddr_bandwidth
    chown system system /sys/class/devfreq/ddrfreq_up_threshold/cur_freq
    chmod 664 /sys/class/devfreq/ddrfreq_up_threshold/cur_freq
    chown system system /sys/class/devfreq/ddrfreq_up_threshold/available_frequencies
    chmod 664 /sys/class/devfreq/ddrfreq_up_threshold/available_frequencies
    chown system system /sys/class/devfreq/ddrfreq_up_threshold/polling_interval
    chmod 664 /sys/class/devfreq/ddrfreq_up_threshold/polling_interval

    chown system system /sys/class/thermal/thermal_zone0/mode
    chmod 0664 /sys/class/thermal/thermal_zone0/mode
    chown system system /sys/class/thermal/thermal_zone0/trip_point_0_temp
    chmod 0664 /sys/class/thermal/thermal_zone0/trip_point_0_temp
    chown system system /sys/class/thermal/thermal_zone0/trip_point_1_temp
    chmod 0664 /sys/class/thermal/thermal_zone0/trip_point_1_temp
    chown system system /sys/class/thermal/thermal_zone0/sustainable_power
    chmod 0664 /sys/class/thermal/thermal_zone0/sustainable_power

    chown system system /sys/kernel/hmp/task_fork_on_bigcluster
    chmod 0664 /sys/kernel/hmp/task_fork_on_bigcluster

    chown system system /sys/kernel/hmp/boost
    chmod 0664 /sys/kernel/hmp/boost

    chown system system /sys/kernel/perfhub/cpuaffinity
    chmod 0660 /sys/kernel/perfhub/cpuaffinity

    write /proc/sys/kernel/hung_task_panic 0
    write /proc/sys/kernel/hung_task_timeout_secs 120
    write /sys/kernel/hungtask/enable "off"

    chmod 0750 /sys/kernel/mntn/
    chmod 0750 /sys/kernel/mntn/switch/
    chmod 0660 /sys/kernel/mntn/switch/irq
    chmod 0660 /sys/kernel/mntn/switch/task
    chmod 0660 /sys/kernel/mntn/switch/cpuidle
    chmod 0660 /sys/kernel/mntn/switch/cpuonoff
    chmod 0660 /sys/kernel/mntn/switch/syscall
    chmod 0660 /sys/kernel/mntn/switch/hungtask
    chmod 0660 /sys/kernel/mntn/switch/tasklet
    chmod 0660 /sys/kernel/mntn/switch/worker

    chown system system /dev/cpuctl
    chown system system /dev/cpuctl/tasks
    chmod 0666 /dev/cpuctl/tasks
    write /dev/cpuctl/cpu.shares 1024
    write /dev/cpuctl/cpu.rt_runtime_us 800000
    write /dev/cpuctl/cpu.rt_period_us 1000000

    mkdir /dev/cpuctl/bg_non_interactive
    chown system system /dev/cpuctl/bg_non_interactive/tasks
    chmod 0666 /dev/cpuctl/bg_non_interactive/tasks
    write /dev/cpuctl/bg_non_interactive/cpu.shares 52
    write /dev/cpuctl/bg_non_interactive/cpu.rt_runtime_us 700000
    write /dev/cpuctl/bg_non_interactive/cpu.rt_period_us 1000000

    mkdir /dev/cpuctl/limit_fg
    chown system system /dev/cpuctl/limit_fg/tasks
    chmod 644 /dev/cpuctl/limit_fg/tasks
    write /dev/cpuctl/limit_fg/cpu.shares 1024
    write /dev/cpuctl/limit_fg/cpu.rt_runtime_us 800000
    write /dev/cpuctl/limit_fg/cpu.rt_period_us 1000000

    mkdir /dev/cpuctl/bg_non_interactive/limit_bg
    chown system system /dev/cpuctl/bg_non_interactive/limit_bg/tasks
    chmod 644 /dev/cpuctl/bg_non_interactive/limit_bg/tasks
    write /dev/cpuctl/bg_non_interactive/limit_bg/cpu.shares 1024
    write /dev/cpuctl/bg_non_interactive/limit_bg/cpu.rt_runtime_us 700000
    write /dev/cpuctl/bg_non_interactive/limit_bg/cpu.rt_period_us 1000000

    mkdir /dev/cpuset/foreground
    write /dev/cpuset/foreground/cpus 0-7
    write /dev/cpuset/foreground/mems 0
    mkdir /dev/cpuset/foreground/boost
    write /dev/cpuset/foreground/boost/cpus 0-7
    write /dev/cpuset/foreground/boost/mems 0
    mkdir /dev/cpuset/background
    write /dev/cpuset/background/cpus 0-3
    write /dev/cpuset/background/mems 0

    mkdir /dev/cpuset/system-background
    write /dev/cpuset/system-background/cpus 0-3
    write /dev/cpuset/system-background/mems 0

    mkdir /dev/cpuset/top-app
    write /dev/cpuset/top-app/cpus 0-7
    write /dev/cpuset/top-app/mems 0

    chown system system /dev/cpuset
    chown system system /dev/cpuset/foreground
    chown system system /dev/cpuset/foreground/boost
    chown system system /dev/cpuset/background
    chown system system /dev/cpuset/system-background
    chown system system /dev/cpuset/top-app
    chown system system /dev/cpuset/tasks
    chown system system /dev/cpuset/foreground/tasks
    chown system system /dev/cpuset/foreground/boost/tasks
    chown system system /dev/cpuset/background/tasks
    chown system system /dev/cpuset/system-background/tasks
    chown system system /dev/cpuset/top-app/tasks

    chmod 0775 /dev/cpuset/system-background

    chmod 0664 /dev/cpuset/foreground/tasks
    chmod 0664 /dev/cpuset/foreground/boost/tasks
    chmod 0664 /dev/cpuset/background/tasks
    chmod 0664 /dev/cpuset/system-background/tasks
    chmod 0664 /dev/cpuset/top-app/tasks
    chmod 0664 /dev/cpuset/tasks

    mkdir /dev/cpuset/vip
    write /dev/cpuset/vip/cpus 0-7
    write /dev/cpuset/vip/mems 0
    chown system system /dev/cpuset/vip
    chown system system /dev/cpuset/vip/tasks
    chmod 0664 /dev/cpuset/vip/tasks
    
    mkdir /dev/frz
    mount cgroup none /dev/frz freezer

    mkdir /dev/frz/aware_frozen
    chmod 0660 /dev/frz/aware_frozen
    chown root root /dev/frz/aware_frozen

    chown system system /sys/devices/platform/fingerprint/read_image_flag
    chmod 0660 /sys/devices/platform/fingerprint/read_image_flag
    chown system system /sys/devices/platform/fingerprint/nav
    chmod 0660 /sys/devices/platform/fingerprint/nav
    
    write /sys/module/dm_verity/parameters/prefetch_cluster 16384
    write /sys/module/dm_bufio/parameters/max_cache_size_bytes 383385600
    
on early-fs
    # Oeminfo
    wait /dev/block/bootdevice/by-name/oeminfo
    start oeminfo_nvm
    
on fs
    wait /dev/block/platform/hi_mci.0/by-name
    mount_all /vendor/etc/fstab.hi3650 --early
    
    restorecon /splash2

    mkdir /splash2/log 0775 system log
    symlink /splash2/fac_log /data/log/fac_log
    symlink /splash2 /log
    
    restorecon /sys/class/leds/red/brightness
    restorecon /sys/class/leds/green/brightness
    restorecon /sys/class/leds/blue/brightness
    
    restorecon /sys/class/hw_power/charger/charge_data/enable_charger
    restorecon /sys/class/leds/lcd_backlight0/brightness
    restorecon /sys/class/graphics/fb0/lcd_test_config
    restorecon /sys/class/graphics/fb0/amoled_pcd_errflag_check

    restorecon /sys/class/graphics/fb0/amoled_acl
    restorecon /sys/class/graphics/fb0/amoled_hbm

    restorecon /sys/class/sensors/ps_sensor/calibrate
    restorecon /sys/class/sensors/ps_sensor/calibrate_timeout
    restorecon /sys/class/sensors/acc_sensor/info
    restorecon /sys/class/sensors/acc_sensor/self_test
    restorecon /sys/class/sensors/acc_sensor/calibrate
    restorecon /sys/class/sensors/acc_sensor/calibrate_timeout
    restorecon /sys/class/sensors/acc_sensor/self_test_timeout
    restorecon /sys/class/sensors/gyro_sensor/self_test
    restorecon /sys/class/sensors/gyro_sensor/self_test_timeout
    restorecon /sys/class/sensors/mag_sensor/self_test
    restorecon /sys/class/sensors/mag_sensor/info
    restorecon /sys/class/sensors/mag_sensor/self_test_timeout
    restorecon /sys/class/sensors/airpress_sensor/read_airpress
    restorecon /sys/class/sensors/airpress_sensor/set_calidata

    restorecon /sys/kernel/set_hmp_thresholds/policy
    restorecon /sys/class/graphics/fb0/lcd_cabc_mode
    
on late-fs
    mount_all /vendor/etc/fstab.hi3650 --late
    
on post-fs
    chown system system /proc/uid_cputime/show_uid_stat
    chmod 0440 /proc/uid_cputime/show_uid_stat
    chown system system /proc/uid_cputime/remove_uid_range
    chmod 0660 /proc/uid_cputime/remove_uid_range
    chown system system /proc/uid_iostats/show_uid_iostats
    chmod 0440 /proc/uid_iostats/show_uid_iostats
    chown system system /proc/uid_iostats/uid_iomonitor_list
    chmod 0660 /proc/uid_iostats/uid_iomonitor_list
    chown system system /proc/uid_iostats/remove_uid_list
    chmod 0660 /proc/uid_iostats/remove_uid_list
    
on post-fs-data
    setprop sys.userdata_is_ready 1
    start teecd
    setprop persist.sys.kmemleak.debug 0
    
    mkdir /splash2/sim 0770 root system
    mkdir /splash2/sim/offlinelogs 0770 root system
    write /splash2/sim/offlinelogs/balong_modem1_simoffline.txt  0
    write /splash2/sim/offlinelogs/balong_modem2_simoffline.txt  0
    write /splash2/sim/offlinelogs/balong_modem3_simoffline.txt  0
    write /splash2/sim/offlinelogs/slot1_simoffline.txt  0
    write /splash2/sim/sim_pin_file.bin  ""
    write /splash2/sim/pin_key_file.bin  ""

    chmod 0660 /splash2/sim/offlinelogs/balong_modem1_simoffline.txt
    chmod 0660 /splash2/sim/offlinelogs/balong_modem2_simoffline.txt
    chmod 0660 /splash2/sim/offlinelogs/balong_modem3_simoffline.txt
    chmod 0660 /splash2/sim/offlinelogs/slot1_simoffline.txt
    chmod 0660 /splash2/sim/sim_pin_file.bin
    chmod 0660 /splash2/sim/pin_key_file.bin

    chown radio system /splash2/sim/offlinelogs/balong_modem1_simoffline.txt
    chown radio system /splash2/sim/offlinelogs/balong_modem2_simoffline.txt
    chown radio system /splash2/sim/offlinelogs/balong_modem3_simoffline.txt
    chown radio system /splash2/sim/offlinelogs/slot1_simoffline.txt
    chown root  radio  /splash2/sim/sim_pin_file.bin
    chown root  radio  /splash2/sim/pin_key_file.bin

    symlink /splash2/sim/offlinelogs /data/offlinelogs

    mkdir /modem_log
    mkdir /modem_log/log 0665
    mkdir /modem_log/DrvLog 0665
    mkdir /modem_log/DrvLog/Sim0 0665
    mkdir /modem_log/DrvLog/Sim1 0665
    restorecon_recursive /modem_log

    setprop camera.dis.flag 2
    setprop camera.tnr.flag 1
    
    mkdir /data/camera 771 system camera
    chmod 664 /data/camera/hisi_sensor0
    chmod 664 /data/camera/hisi_sensor1
    mkdir /data/img 770 system camera
    
    mkdir /data/share 0770 media_rw media_rw
    mkdir /data/samba 0755 media_rw media_rw
    
    mkdir /data/log/3rdcp-log 0775 radio system

    mkdir /data/nvram/ 0770 root system
    mkdir /data/nvram/md_via 0770 root system

    mkdir /data/pppd_via 0770 radio system

    write /sys/kernel/hwtc/hwtc_enable 1
    
    mkdir /data/hwzd_logs 0775 system system
    restorecon_recursive /data/hwzd_logs

    mkdir /data/log 0775 system system
    restorecon_recursive /data/log

    mkdir /data/hisi_logs 0770 system system
    restorecon_recursive /data/hisi_logs

    mkdir /data/log/press10 0770 system system
    restorecon_recursive /data/log/press10

    mkdir /data/log/isp-log 0774 system system
    restorecon_recursive /data/log/isp-log

    mkdir /data/apkpush 0770 system cache
    restorecon_recursive /data/apkpush

    mkdir /data/misc/hsm 0770 system system
    restorecon_recursive /data/misc/hsm

    mkdir /data/cota 0775 system system
    restorecon_recursive /data/cota

    mkdir /data/cota/cloud 0770 system system
    chmod 0770 /data/cota/cloud
    
    mkdir /data/misc/hwpush 0770 system system
    restorecon_recursive /data/misc/hwpush
    
    chown root system /sys/kernel/exmbist_test/test_entry
    chmod 0664 /sys/kernel/exmbist_test/test_entry

    chown root system /sys/kernel/exmbist_test/test_entry
    chmod 0664 /sys/kernel/exmbist_test/test_result

    mkdir /data/misc/oma 0770 system system
    restorecon_recursive /data/misc/oma

    mkdir /splash2/boot_fail 0775 root system
    restorecon_recursive /splash2/boot_fail
    
    mkdir /data/misc/radvd 0770 root root
    mkdir /data/misc/dhcp6s 0770 root root
    
    mkdir /data/drm/rights 0770 drm drm
    mkdir /data/drm/widevine 0770 drm drm
    
    mkdir /mnt/media_rw 0750 media_rw media_rw
    
    setprop vold.post_fs_data_done 1

on early-boot
    chown system system /proc/portcfg
    chown system system /proc/getslice
    chown media media /sys/class/graphics/fb0/effect_ce

    setprop viatel.device.fls  spi.2.ttySPI
    setprop viatel.device.at   spi.10.ttySPI
    setprop viatel.device.data spi.0.ttySPI
    setprop viatel.device.pcv spi.4.ttySPI
    setprop viatel.device.gps spi.5.ttySPI
    
    mkdir /3rdmodemnvm/viacbp82d 0740 radio radio
    mkdir /3rdmodemnvmbkp/viacbp82d 0740 radio radio

    chown radio radio /3rdmodem/
    chown radio radio /3rdmodem/modem_image
    chown radio radio /3rdmodem/modem_image/viacbp82d
    chown radio radio /3rdmodemnvm
    chown radio radio /3rdmodemnvm/viacbp82d
    chown radio radio /3rdmodemnvmbkp
    chown radio radio /3rdmodemnvmbkp/viacbp82d
    chown radio radio /3rdmodem/modem_image/viacbp82d/boot.rom
    chown radio radio /3rdmodem/modem_image/viacbp82d/cp.rom
    chown radio radio /3rdmodem/modem_image/viacbp82d/fsm_df.img
    chown radio radio /3rdmodem/modem_image/viacbp82d/RfsTable
    chown radio radio /3rdmodemnvm/viacbp82d/fsm_0.img
    chown radio radio /3rdmodemnvm/viacbp82d/fsm_1.img
    chown radio radio /3rdmodemnvm/viacbp82d/fsm_cl.img
    chown radio radio /3rdmodemnvmbkp/viacbp82d/fsm_cl_backup.img

    chmod 0750 /3rdmodem/
    chmod 0750 /3rdmodemnvm/
    chmod 0750 /3rdmodemnvmbkp/

    chmod 0740 /3rdmodem/modem_image
    chmod 0740 /3rdmodem/modem_image/viacbp82d
    chmod 0740 /3rdmodemnvm/viacbp82d
    chmod 0740 /3rdmodemnvmbkp/viacbp82d
    chmod 0640 /3rdmodem/modem_image/viacbp82d/boot.rom
    chmod 0640 /3rdmodem/modem_image/viacbp82d/cp.rom
    chmod 0640 /3rdmodem/modem_image/viacbp82d/fsm_df.img
    chmod 0640 /3rdmodem/modem_image/viacbp82d/RfsTable
    chmod 0640 /3rdmodemnvm/viacbp82d/fsm_0.img
    chmod 0640 /3rdmodemnvm/viacbp82d/fsm_1.img
    chmod 0640 /3rdmodemnvm/viacbp82d/fsm_cl.img
    chmod 0640 /3rdmodemnvmbkp/viacbp82d/fsm_cl_backup.img
    
    chmod  0660  /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/fixture_debug
    chown system  system  /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/fixture_debug
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/ic_ver
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/hw_reset
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/hw_irq_stat
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/drv_debug
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/sleep_status
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/wakeup_gesture_enable
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/easy_wakeup_gesture
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/easy_wakeup_control
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/easy_wakeup_position
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/easy_wakeup_supported_gestures
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_glove
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_window
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_sensitivity
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/fw_update_sd
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/reset
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_chip_info
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_oem_info
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/roi_enable
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/roi_data
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/roi_data_debug
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/hw_mmi_index
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/cyttsp5_device_access.main_ttsp_core/rawdata_check
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/cyttsp5_device_access.main_ttsp_core/command
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/cyttsp5_device_access.main_ttsp_core/response
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/tp_capacitance_test_type
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/supported_func_indicater
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/tp_capacitance_test_config
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/calibrate
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/calibrate_wakeup_gesture
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_rawdata_debug
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_special_hardware_test
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_register_operation
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_wideth
    
    chown system system /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/tap_to_wake
    chmod 0664 /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/tap_to_wake
    
    # Toucscreen gestures & glove mode
    chmod 0664 /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/easy_wakeup_gesture
    chmod 0664 /sys/devices/platform/amba/ffd73000.i2c/i2c-0/0-0024/touch_glove
    
    chown system system /proc/touchscreen/data
    chown system system /proc/touchscreen/dumpdata
    chown system system /proc/touchscreen/rawdata
    chown system system /proc/touchscreen/tp_capacitance_data
    chown system system /sys/devices/platform/huawei_tp_color/tp_color_info

    write /dev/pmsg0 1

on boot
    write /sys/kernel/debug/kmemleak scan=14400
    chown radio radio /proc/modemstatus
    
    chown root radio /proc/cmdline
    chmod 0666 /proc/cmdline
    
    chown system system /sys/devices/platform/fingerprint/irq
    chmod 0660 /sys/devices/platform/fingerprint/irq
    chown system system /sys/devices/platform/fingerprint/result
    chmod 0660 /sys/devices/platform/fingerprint/result
    chown system system /sys/devices/platform/fingerprint/fingerprint_chip_info
    
    chmod 0660 /sys/class/hw_power/charger/charge_data/adc_conv_rate
    chown system system /sys/class/hw_power/charger/charge_data/adc_conv_rate
    chmod 0660 /sys/class/hw_power/charger/charge_data/enable_charger
    chown system system /sys/class/hw_power/charger/charge_data/enable_charger
    chmod 0660 /sys/class/hw_power/charger/charge_data/iin_thermal
    chown system system /sys/class/hw_power/charger/charge_data/iin_thermal
    chmod 0660 /sys/class/hw_power/charger/charge_data/iin_thermal_aux
    chown system system /sys/class/hw_power/charger/charge_data/iin_thermal_aux
    chmod 0660 /sys/class/hw_power/charger/charge_data/ichg_thermal
    chown system system /sys/class/hw_power/charger/charge_data/ichg_thermal
    chmod 0660 /sys/class/hw_power/charger/charge_data/ichg_thermal_aux
    chown system system /sys/class/hw_power/charger/charge_data/ichg_thermal_aux
    chmod 0660 /sys/class/hw_power/charger/charge_data/regulation_voltage
    chown system system /sys/class/hw_power/charger/charge_data/regulation_voltage
    chmod 0660 /sys/class/hw_power/charger/charge_data/iin_runningtest
    chown system system /sys/class/hw_power/charger/charge_data/iin_runningtest
    chmod 0660 /sys/class/hw_power/charger/charge_data/ichg_runningtest
    chown system system /sys/class/hw_power/charger/charge_data/ichg_runningtest
    chown system system /sys/class/hisi_usb_class/hisi_usb_dev/interface/release_wakelock
    chmod 0660 /sys/class/hisi_usb_class/hisi_usb_dev/interface/release_wakelock
    chmod 0660 /sys/class/hw_power/charger/charge_data/enable_hiz
    chown system system /sys/class/hw_power/charger/charge_data/enable_hiz
    chmod 0660 /sys/class/hw_power/charger/charge_data/shutdown_watchdog
    chown system system /sys/class/hw_power/charger/charge_data/shutdown_watchdog
    chmod 0660 /sys/class/hw_power/charger/charge_data/inputcurrent
    chown system system /sys/class/hw_power/charger/charge_data/inputcurrent
    chmod 0660 /sys/class/hw_power/charger/charge_data/voltage_sys
    chown system system /sys/class/hw_power/charger/charge_data/voltage_sys
    chmod 0660 /sys/class/hw_power/charger/charge_data/vr_charger_type
    chown system system /sys/class/hw_power/charger/charge_data/vr_charger_type
    chmod 0660 /sys/class/hw_power/charger/direct_charger/enable_charger
    chown system system /sys/class/hw_power/charger/direct_charger/enable_charger
    chmod 0660 /sys/class/hw_power/charger/direct_charger/iin_thermal
    chown system system /sys/class/hw_power/charger/direct_charger/iin_thermal
    
    chown system system /sys/class/graphics/fb0/sbl_ctrl
    chown system system /sys/class/graphics/fb0/lcd_color_temperature
    chown system system /sys/class/graphics/fb0/led_rg_lcd_color_temperature
    chown system system /sys/class/graphics/fb0/lcd_comform_mode
    chown system system /sys/class/graphics/fb0/lcd_cinema_mode
    chown system system /sys/class/graphics/fb0/lcd_starlight_mode
    chown system system /sys/class/graphics/fb0/lcd_cabc_mode
    chown system system /sys/class/graphics/fb0/lcd_ce_mode
    chown system system /sys/class/graphics/fb0/lcd_hkadc
    chown system system /sys/class/graphics/fb0/lcd_checksum
    chown system system /sys/class/graphics/fb0/lcd_bist_check
    chown system system /sys/class/graphics/fb0/lcd_check_reg
    chown system system /sys/class/graphics/fb0/lcd_mipi_detect
    chown system system /sys/class/graphics/fb0/lcd_model
    chown system system /sys/class/graphics/fb0/lcd_voltage_enable
    chown system system /sys/class/graphics/fb0/frame_count
    chown system system /sys/class/graphics/fb0/frame_update
    chown system system /sys/class/graphics/fb0/lcd_fps_scence
    chown radio radio /sys/class/graphics/fb0/mipi_dsi_bit_clk_upt
    chown system system /sys/class/graphics/fb0/lcd_status
    chown system system /sys/class/graphics/fb0/amoled_pcd_errflag_check

    chown system system /sys/class/graphics/fb0/lcd_sleep_ctrl
    chown system system /sys/class/graphics/fb0/lcd_func_switch
    chown system system /sys/class/graphics/fb0/lcd_test_config
    chown system system /sys/class/graphics/fb0/lcd_support_mode
    chown system system /sys/class/graphics/fb0/lcd_ic_color_enhancement_mode
    chown system system /sys/class/graphics/fb0/lcd_support_checkmode
    chown system system /sys/class/graphics/fb0/lcd_lp2hs_mipi_check
    chown system system /sys/class/graphics/fb0/amoled_pcd_errflag_check
    chown system system /sys/class/graphics/fb0/panel_info
    chown system system /sys/class/graphics/fb0/lcd_scan_mode
    chown system system /sys/class/graphics/fb0/lcd_acm_state
    chown system system /sys/class/graphics/fb0/amoled_acl
    chown system system /sys/class/graphics/fb0/amoled_hbm
    chown system system /sys/class/graphics/fb0/lcd_gmp_state
    chown system system /sys/class/graphics/fb0/effect_al
    chown system system /sys/class/graphics/fb0/effect_bl
    chown system system /sys/class/graphics/fb0/effect_bl_enable
    chown system system /sys/class/graphics/fb0/effect_sre
    chown system system /sys/class/graphics/fb0/effect_hdr_mode
    chown system system /sys/class/graphics/fb0/effect_metadata
    chown system system /sys/class/graphics/fb0/effect_available
    chown system system /sys/class/graphics/fb0/alpm_function
    chown system system /sys/class/graphics/fb0/alpm_setting
    chown system system /sys/class/graphics/fb0/amoled_vr_mode
    
    chown system system /sys/class/leds/blue/trigger
    chown system system /sys/class/leds/red/trigger
    chown system system /sys/class/leds/green/trigger

    chown system system /sys/class/timed_output/vibrator/enable
    
    chmod 0660 /proc/key_mask
    chown root system /proc/key_mask
    chmod 0440 /proc/audio/hi64xxdump
    chown root system /proc/audio/hi64xxdump
    chmod 0660 /proc/hi64xxdbg/hi64xxdebug
    chown root system /proc/hi64xxdbg/hi64xxdebug
	
    # Camera
    chown system system /sys/bus/platform/drivers/huawei,camcfgdev/guard_thermal
    chmod 664 /sys/bus/platform/drivers/huawei,camcfgdev/guard_thermal 
    chown system system /sys/class/camerafs/node/dual_leds
    chmod 664 /sys/class/camerafs/node/dual_leds
    chown system system /sys/class/camerafs/node/lightness
    chmod 664 /sys/class/camerafs/node/lightness
    chown system system /sys/class/camerafs/node/cam_ldo
    chmod 660 /sys/class/camerafs/node/cam_ldo
    
    chown system system /sys/class/camerafs/node/thermal_meter0
    chown system system /sys/class/camerafs/node/thermal_meter1
    chown system system /sys/class/camerafs/node/thermal_meter2
    chmod 664 /sys/class/camerafs/node/thermal_meter0
    chmod 664 /sys/class/camerafs/node/thermal_meter1
    chmod 664 /sys/class/camerafs/node/thermal_meter2

    chown system system /sys/class/camerafs/ois/ois_aging
    chmod 664 /sys/class/camerafs/ois/ois_aging
    chown system system /sys/class/camerafs/ois/ois_pixel
    chmod 664 /sys/class/camerafs/ois/ois_pixel
    chown system system /sys/class/camerafs/ois/ois_check
    chmod 664 /sys/class/camerafs/ois/ois_check
    chown system system /sys/class/camerafs/ois/ois_icnum
    chmod 664 /sys/class/camerafs/ois/ois_icnum

    chown root radio /sys/kernel/sim/sim0_hotplug_state
    chown root radio /sys/kernel/sim/sim1_hotplug_state
    chown root radio /sys/kernel/sim/sim2_hotplug_state
    chown root radio /sys/kernel/sim/sim_hotplug_state

    write /splash2/sim/sim_pin_file.bin  "000000"
    chown system system /sys/class/leds/lcd_backlight0/brightness
    chmod 644 /sys/class/leds/lcd_backlight0/brightness

    chown system system /sys/devices/platform/huawei_sensor/acc_info
    chown system system /sys/devices/platform/huawei_sensor/mag_info
    chown system system /sys/devices/platform/huawei_sensor/gyro_info
    chown system system /sys/devices/platform/huawei_sensor/als_info
    chown system system /sys/devices/platform/huawei_sensor/ps_info
    chown system system /sys/devices/platform/huawei_sensor/gyro_selfTest
    chown system system /sys/devices/platform/huawei_sensor/mag_selfTest
    chown system system /sys/devices/platform/huawei_sensor/acc_calibrate
    chown system system /sys/devices/platform/huawei_sensor/acc_enable
    chown system system /sys/devices/platform/huawei_sensor/acc_setdelay
    chown system system /sys/devices/platform/huawei_sensor/acc_selfTest
    chown system system /sys/devices/platform/huawei_sensor/mag_enable
    chown system system /sys/devices/platform/huawei_sensor/mag_setdelay
    chown system system /sys/devices/platform/huawei_sensor/gyro_calibrate
    chown system system /sys/devices/platform/huawei_sensor/gyro_enable
    chown system system /sys/devices/platform/huawei_sensor/gyro_setdelay
    chown system system /sys/devices/platform/huawei_sensor/als_calibrate
    chown system system /sys/devices/platform/huawei_sensor/als_enable
    chown system system /sys/devices/platform/huawei_sensor/als_setdelay
    chown system system /sys/devices/platform/huawei_sensor/sbl_enable
    chown system system /sys/devices/platform/huawei_sensor/sbl_setdelay
    chown system system /sys/devices/platform/huawei_sensor/sbl_setbacklight
    chown system system /sys/devices/platform/huawei_sensor/ps_calibrate
    chown system system /sys/devices/platform/huawei_sensor/ps_enable
    chown system system /sys/devices/platform/huawei_sensor/ps_setdelay
    chown system system /sys/devices/platform/huawei_sensor/os_enable
    chown system system /sys/devices/platform/huawei_sensor/os_setdelay
    chown system system /sys/devices/platform/huawei_sensor/lines_enable
    chown system system /sys/devices/platform/huawei_sensor/lines_setdelay
    chown system system /sys/devices/platform/huawei_sensor/gras_enable
    chown system system /sys/devices/platform/huawei_sensor/gras_setdelay
    chown system system /sys/devices/platform/huawei_sensor/rvs_enable
    chown system system /sys/devices/platform/huawei_sensor/rvs_setdelay
    chown system system /sys/devices/platform/huawei_sensor/i2c_rw
    chown system system /sys/devices/platform/huawei_sensor/dt_motion_stup
    chown system system /sys/devices/platform/huawei_sensor/dt_stop_auto_motion
    chown system system /sys/devices/platform/huawei_sensor/dt_sensor_stup
    chown system system /sys/devices/platform/huawei_sensor/dt_stop_auto_data
    chown system system /sys/devices/platform/huawei_sensor/airpress_enable
    chown system system /sys/devices/platform/huawei_sensor/airpress_setdelay
    chown system system /sys/devices/platform/huawei_sensor/airpress_info
    chown system system /sys/devices/platform/huawei_sensor/airpress_set_calidata
    chown system system /sys/devices/platform/huawei_sensor/dt_stepcounter_stup
    chown system system /sys/devices/platform/huawei_sensor/handpress_enable
    chown system system /sys/devices/platform/huawei_sensor/handpress_info
    chown system system /sys/devices/platform/huawei_sensor/handpress_read_data
    chown system system /sys/devices/platform/huawei_sensor/handpress_setdelay
    chown system system /sys/devices/platform/huawei_sensor/read_airpress
    chown system system /sys/devices/platform/huawei_sensor/read_temperature
    chown system system /sys/devices/platform/huawei_sensor/ois_ctrl

    chown system system /sys/devices/platform/huawei_sensor/hifi_supported
    chown system system /sys/class/sensors/acc_sensorlist_info
    chown system system /sys/class/sensors/mag_sensorlist_info
    chown system system /sys/class/sensors/gyro_sensorlist_info
    chown system system /sys/class/sensors/ps_sensorlist_info
    chown system system /sys/class/sensors/als_sensorlist_info
    chown system system /sys/class/sensors/airpress_sensorlist_info
    chown system system /sys/class/sensors/airpress_sensorlist_info

    chown system system /sys/class/sensors/sensorhub_dbg
    chown system system /sys/class/sensors/acc_sensor/enable
    chown system system /sys/class/sensors/acc_sensor/set_delay
    chown system system /sys/class/sensors/acc_sensor/info
    chown system system /sys/class/sensors/acc_sensor/get_data
    chown system system /sys/class/sensors/acc_sensor/self_test
    chown system system /sys/class/sensors/acc_sensor/self_test_timeout
    chown system system /sys/class/sensors/acc_sensor/calibrate
    chown system system /sys/class/sensors/acc_sensor/calibrate_timeout
    chown system system /sys/class/sensors/gyro_sensor/enable
    chown system system /sys/class/sensors/gyro_sensor/set_delay
    chown system system /sys/class/sensors/gyro_sensor/info
    chown system system /sys/class/sensors/gyro_sensor/get_data
    chown system system /sys/class/sensors/gyro_sensor/self_test
    chown system system /sys/class/sensors/gyro_sensor/self_test_timeout
    chown system system /sys/class/sensors/gyro_sensor/calibrate
    chown system system /sys/class/sensors/gyro_sensor/calibrate_timeout
    chown system system /sys/class/sensors/mag_sensor/enable
    chown system system /sys/class/sensors/mag_sensor/set_delay
    chown system system /sys/class/sensors/mag_sensor/info
    chown system system /sys/class/sensors/mag_sensor/get_data
    chown system system /sys/class/sensors/mag_sensor/self_test
    chown system system /sys/class/sensors/mag_sensor/self_test_timeout
    chown system system /sys/class/sensors/mag_sensor/calibrate_method
    chown system system /sys/class/sensors/als_sensor/enable
    chown system system /sys/class/sensors/als_sensor/set_delay
    chown system system /sys/class/sensors/als_sensor/info
    chown system system /sys/class/sensors/als_sensor/get_data
    chown system system /sys/class/sensors/als_sensor/calibrate
    chown system system /sys/class/sensors/als_sensor/calibrate_timeout
    chown system system /sys/class/sensors/ps_sensor/enable
    chown system system /sys/class/sensors/ps_sensor/set_delay
    chown system system /sys/class/sensors/ps_sensor/info
    chown system system /sys/class/sensors/ps_sensor/get_data
    chown system system /sys/class/sensors/ps_sensor/calibrate
    chown system system /sys/class/sensors/ps_sensor/calibrate_timeout
    chown system system /sys/class/sensors/hall_sensor/enable
    chown system system /sys/class/sensors/hall_sensor/set_delay
    chown system system /sys/class/sensors/hall_sensor/info
    chown system system /sys/class/sensors/hall_sensor/get_data
    chown system system /sys/class/sensors/airpress_sensor/enable
    chown system system /sys/class/sensors/airpress_sensor/set_delay
    chown system system /sys/class/sensors/airpress_sensor/info
    chown system system /sys/class/sensors/airpress_sensor/get_data
    chown system system /sys/class/sensors/airpress_sensor/read_airpress
    chown system system /sys/class/sensors/airpress_sensor/set_calidata
    chown system system /sys/class/sensors/fingersense_sensor/set_fingersense_enable
    chown system system /sys/class/sensors/fingersense_sensor/fingersense_data_ready
    chown system system /sys/class/sensors/fingersense_sensor/fingersense_latch_data
    chown system system /sys/class/sensors/fingersense_sensor/fingersense_req_data
    chown system system /sys/devices/platform/huawei_sensorhub_logbuff/logbuff_config
    chmod 660 /sys/devices/platform/huawei_sensorhub_logbuff/logbuff_config
    chown system system /sys/devices/platform/huawei_sensorhub_logbuff/logbuff_flush
    chmod 444 /sys/devices/platform/huawei_sensorhub_logbuff/logbuff_flush
    chown system system /sys/class/sensors/libsensor_ver

    chown system system /sys/devices/platform/huawei_sensor/set_fingersense_enable
    chmod 0660 /sys/devices/platform/huawei_sensor/set_fingersense_enable
    chown system system /sys/devices/platform/huawei_sensor/fingersense_req_data
    chmod 0660 /sys/devices/platform/huawei_sensor/fingersense_req_data
    chown system system /sys/devices/platform/huawei_sensor/fingersense_data_ready
    chmod 0440 /sys/devices/platform/huawei_sensor/fingersense_data_ready
    chown system system /sys/devices/platform/huawei_sensor/fingersense_latch_data
    chmod 0440 /sys/devices/platform/huawei_sensor/fingersense_latch_data
    
    chown system system /sys/class/hall/hall/state
    chown system system /sys/class/hall/hall/report
    chown system system /sys/class/hall/hall/info
    chown system system /sys/class/hall/hall/count
    chown system system /sys/class/hall/hall/enable
    chown system system /sys/class/hall/hall/flag
    chown system system /sys/class/hall/hall/period
    chown system system /sys/class/hall/hall/report_count
    chown system system /sys/class/hall/hall/value

    chmod 660 /proc/hifidsp/hifi
    chown root audio /proc/hifidsp/hifi
    chmod 660 /proc/hifidsp/hifi_pcm_read
    chown root audio /proc/hifidsp/hifi_pcm_read

    write /proc/sys/net/core/rps_sock_flow_entries 32768
    write /sys/class/net/rmnet0/queues/rx-0/rps_flow_cnt 4096
    write /sys/class/net/rmnet0/queues/rx-0/rps_cpus ff
    write /sys/class/net/rmnet1/queues/rx-0/rps_flow_cnt 4096
    write /sys/class/net/rmnet1/queues/rx-0/rps_cpus ff
    write /sys/class/net/rmnet2/queues/rx-0/rps_flow_cnt 4096
    write /sys/class/net/rmnet2/queues/rx-0/rps_cpus ff
    write /sys/class/net/rmnet3/queues/rx-0/rps_flow_cnt 4096
    write /sys/class/net/rmnet3/queues/rx-0/rps_cpus ff
    write /sys/class/net/rmnet4/queues/rx-0/rps_flow_cnt 4096
    write /sys/class/net/rmnet4/queues/rx-0/rps_cpus ff
    write /sys/class/net/rmnet_ims/queues/rx-0/rps_flow_cnt 4096
    write /sys/class/net/rmnet_ims/queues/rx-0/rps_cpus ff

    write /proc/sys/net/core/netdev_max_backlog 2000
    write /proc/sys/net/netfilter/nf_conntrack_checksum 0
    write /proc/sys/net/netfilter/nf_conntrack_helper 1

    write /proc/sys/net/core/rmem_max 8388608
    write /proc/sys/net/core/wmem_max 8388608
 
    chown system system /sys/power/monitor/ap_sleep 
    chmod 0660 /sys/power/monitor/ap_sleep  
    chown system system /sys/power/monitor/iom3_sleep   
    chmod 0660 /sys/power/monitor/iom3_sleep    
    chown system system /sys/power/monitor/modem_sleep  
    chmod 0660 /sys/power/monitor/modem_sleep   
    chown system system /sys/power/monitor/suspend_failed   
    chmod 0660 /sys/power/monitor/suspend_failed    
    chown system system /sys/power/monitor/freezing_failed  
    chmod 0660 /sys/power/monitor/freezing_failed   
    chown system system /sys/power/monitor/wakeup_abnormal  
    chmod 0660 /sys/power/monitor/wakeup_abnormal   
    chown system system /sys/power/monitor/driver_abnormal  
    chmod 0660 /sys/power/monitor/driver_abnormal   
    chown system system /sys/power/monitor/wakeup_irq   
    chmod 0660 /sys/power/monitor/wakeup_irq    
    chown system system /sys/power/monitor/icc_vote 
    chmod 0660 /sys/power/monitor/icc_vote  
    chown system system /sys/power/monitor/sensorhub_event  
    chmod 0660 /sys/power/monitor/sensorhub_event   
    chown system system /sys/power/monitor/soc_vote 
    chmod 0660 /sys/power/monitor/soc_vote
    chown system system /sys/power/monitor/wakeup_gpio
    chmod 0660 /sys/power/monitor/wakeup_gpio
    chown system system /sys/power/monitor/modem_reason
    chmod 0660 /sys/power/monitor/modem_reason
    
    setprop hifi.watchdog.come false

on property:hifi.watchdog.come=true
    restart audioserver
    setprop hifi.watchdog.come false

setprop mediadrmserver.restart false

on property:mediadrmserver.restart=true
    restart mediadrm
    setprop mediadrmserver.restart false
    
on property:vold.decrypt=trigger_restart_framework
    trigger data_ready
    
on property:vold.decrypt=trigger_shutdown_framework
    trigger data_not_ready
    
on nonencrypted
    trigger data_ready

on data_ready
    setprop sys.userdata_is_ready 1
    write /proc/post-fs-data 1
    write /proc/apanic_console 1
    write /proc/data-ready 1

on data_not_ready
    setprop sys.userdata_is_ready 0
    write /proc/post-fs-data 0
    write /proc/data-ready 0
    
on charger
    import /vendor/etc/init/hw/init.charger.rc
    
# Start service here

service ril-daemon /vendor/bin/hw/rild
    disabled
    class core
    socket rild stream 660 root radio
    socket rildm2 stream 660 root radio
    socket rildm3 stream 660 root radio
    socket rildi stream 660 root radio
    socket rildi2 stream 660 root radio
    socket rildc1 stream 660 radio system
    socket rildc2 stream 660 radio system
    socket rildc3 stream 660 radio system
    
    socket rild-debug stream 660 radio system
    user root
    group radio cache inet misc audio sdcard_r sdcard_rw log readproc system
    capabilities BLOCK_SUSPEND NET_ADMIN NET_RAW
    
service ril-daemon1 /vendor/bin/hw/rild -c 1
    disabled
    class core
    socket rilds2 stream 660 root radio
    socket rild-debug1 stream 660 radio system
    socket rild-balong-test stream 660 radio system
    user radio
    group radio cache inet misc audio log readproc wakelock net_raw
    capabilities BLOCK_SUSPEND NET_ADMIN NET_RAW

on property:sys.userdata_is_ready=1
    write /sys/devices/platform/his_modem/modem_sysboot_start 1
    start ril-daemon

on property:rild.rild1_ready_to_start=true
    start ril-daemon1

on property:ro.multi.rild=true
    symlink /dev/socket/rilds2 /dev/socket/rild2

on property:ro.multi.rild=false
    symlink /dev/socket/rildm2 /dev/socket/rild2
    symlink /dev/socket/rildm3 /dev/socket/rild3

# Not used in getprop !!!    
service atcmdserver /vendor/bin/atcmdserver
    class main
    group root system nfc graphics audio camera
    disabled

service oeminfo_nvm /vendor/bin/oeminfo_nvm_server
    class core
    group system readproc root
    critical
    ioprio rt 4
       
service diagserver /vendor/bin/diagserver
    class main
    user root
    disabled
    
service teecd /vendor/bin/teecd
    class core
    user root
    group root readproc
    
# Oreo
service hisi-sh /vendor/bin/init.hisi.sh
    class late_start
    user root
    group root system
    oneshot
    
service hwo-sh /system/bin/init.hwo.sh
    class late_start
    user root
    group root system
    oneshot
    
service irqbalance /vendor/bin/irqbalance
    user root
    group system
    disabled
    oneshot
    writepid /dev/cpuset/background/tasks

on property:persist.irqbalance.enable=true
    start irqbalance
    
on property:ro.boot.ddrsize=3
    swapon_all /vendor/etc/fstab.zram1536m
    
on property:ro.boot.ddrsize=4
    swapon_all /vendor/etc/fstab.zram2240m
    
service vendor.audio-hal-2-0 /vendor/bin/hw/android.hardware.audio@2.0-service
    override
    class hal
    user audioserver
    # media gid needed for /dev/fm (radio) and for /data/misc/media (tee)
    group audio camera drmrpc inet media mediadrm net_bt net_bt_admin net_bw_acct wakelock
    capabilities BLOCK_SUSPEND SYS_NICE
    ioprio rt 4
    writepid /dev/cpuset/foreground/tasks /dev/stune/foreground/tasks
    # audioflinger restarts itself when it loses connection with the hal
    # and its .rc file has an "onrestart restart audio-hal" rule, thus
    # an additional auto-restart from the init process isn't needed.
    oneshot
    interface android.hardware.audio@2.0::IDevicesFactory default
